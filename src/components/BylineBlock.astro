---
import type { CollectionEntry } from 'astro:content';

interface Props {
  post: CollectionEntry<'posts'> & { readingTimeMinutes?: number };
  publication: CollectionEntry<'publications'>;
}

const { post, publication } = Astro.props;
const published = new Date(post.data.publishedAt);
const updated = post.data.updatedAt ? new Date(post.data.updatedAt) : null;
---
<div class="mt-4 flex flex-wrap items-center gap-3 border-y border-[var(--rule)] py-3 text-xs uppercase tracking-[0.18em] text-neutral-200">
  <span class="font-semibold text-[var(--accent)]">{publication.data.name}</span>
  <span aria-hidden="true">•</span>
  <span>{published.toLocaleDateString(undefined, { month: 'short', day: 'numeric', year: 'numeric' })}</span>
  {updated && (
    <>
      <span aria-hidden="true">•</span>
      <span>Updated {updated.toLocaleDateString(undefined, { month: 'short', day: 'numeric', year: 'numeric' })}</span>
    </>
  )}
  <span aria-hidden="true">•</span>
  <span>{post.readingTimeMinutes ?? '—'} min read</span>
  <span aria-hidden="true">•</span>
  <span>{post.data.difficulty}</span>
</div>
