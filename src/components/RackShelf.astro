---
import IssueCoverCard from './IssueCoverCard.astro';
import type { CollectionEntry } from 'astro:content';

interface ShelfItem {
  issue: CollectionEntry<'issues'>;
  publication: CollectionEntry<'publications'>;
  coverLines: string[];
}

interface Props {
  title: string;
  items: ShelfItem[];
  ctaLabel?: string;
  ctaHref?: string;
  scrollOnly?: boolean;
}

const { title, items, ctaHref, ctaLabel, scrollOnly = false } = Astro.props;
---
<section class="mb-14 rack-shell" style={`--accent:${items[0]?.publication.data.accent ?? 'var(--accent)'}`}>
  <div class="rack-header">
    <div>
      <div class="rack-eyebrow">Shelf</div>
      <h2 class="rack-title text-3xl md:text-4xl">{title}</h2>
    </div>
    {ctaHref && ctaLabel && (
      <a href={ctaHref} class="btn-link">
        {ctaLabel}
      </a>
    )}
  </div>
  <div class="rack-rail"></div>
  <div class={scrollOnly ? 'shelf-scroll' : 'shelf-grid'}>
    {items.map((item) => (
      <IssueCoverCard issue={item.issue} publication={item.publication} coverLines={item.coverLines} showStatus />
    ))}
  </div>
</section>
